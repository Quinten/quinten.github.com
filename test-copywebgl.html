<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>test copywebgl</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <canvas id="canvas3d" width="400" height="400"></canvas>
        <canvas id="canvas2d" width="400" height="400"></canvas>
        <div style="background: green; position: fixed; width: 100%; height: 40px; top: 0; left: 0;"></div>
        <script type="module">

import webgl from './lib/webgl.js';

// Get the WebGL rendering context
var gl = canvas3d.getContext('webgl');

// Vertex shader
var vshader = `
void main() {

  // Set vertex position: vec4(X, Y, Z, 1.0)
  gl_Position = vec4(0.0, 0.0, 0.0, 1.0);

  // Point size in pixels: float
  gl_PointSize = 10.0;
}`;

// Fragment shader
var fshader = `
precision mediump float;
void main() {

  // Set fragment color: vec4(r, g, b, alpha)
  gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
}`;

var program = webgl.compile(gl, vshader, fshader);

// Set the clear color (black)
//gl.clearColor(0.0, 0.0, 0.0, 1.0);

// Clear the canvas
gl.clear(gl.COLOR_BUFFER_BIT);

// Draw points
gl.drawArrays(
  gl.POINTS, // mode
  0,         // starting point
  1          // number of points to draw
);

var ctx = canvas2d.getContext('2d');
ctx.drawImage(canvas3d, 0, 0);

gl.clear(gl.COLOR_BUFFER_BIT);
gl.deleteProgram(program);

program = webgl.compile(gl, vshader, fshader);
gl.clear(gl.COLOR_BUFFER_BIT);

// Draw points
gl.drawArrays(
  gl.POINTS, // mode
  0,         // starting point
  1          // number of points to draw
);
        </script>
    </body>
</html>
